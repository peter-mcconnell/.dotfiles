---
- name: install go
  become_user: "{{ user }}"
  get_url:
    url: "https://dl.google.com/go/go{{ go_version }}.linux-amd64.tar.gz"
    dest: "/tmp/go{{ go_version }}.linux-amd64.tar.gz"
  register: go_download

- name: extract go archive
  become_user: "{{ user }}"
  unarchive:
    src: "{{ go_download.dest }}"
    dest: "/usr/local"
    remote_src: yes
    owner: "{{ user }}"
    group: "{{ user }}"

- name: install delve
  become_user: "{{ user }}"
  command:
    /usr/local/go/bin/go install github.com/go-delve/delve/cmd/dlv@latest

- name: install gofumpt
  become_user: "{{ user }}"
  command:
    /usr/local/go/bin/go install mvdan.cc/gofumpt@latest

- name: install golines
  become_user: "{{ user }}"
  command:
    /usr/local/go/bin/go install github.com/segmentio/golines@latest
